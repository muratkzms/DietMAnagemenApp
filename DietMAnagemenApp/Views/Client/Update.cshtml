@model Client
@{
    ViewData["Title"] = Model.Fullname + " Danışan Bilgileri Güncelle";
}

<div class="container mt-4">
    <h2 class="text-center">Danışan Güncelle</h2>
    <form asp-action="Update" method="post">

        <div class="col-xl-4 col-lg-6 col-sm-6">

            <div class="text-center">
                <div class="profile-photo">
                    <img src="@Model.Picture" width="100" class="img-fluid rounded-circle" alt="@Model.Fullname">
                </div>

                <div class="form-group mb-3">
                    <label asp-for="Fullname" class="form-label">Ad Soyad</label>
                    <input asp-for="Fullname" class="form-control" />
                    <input type="hidden" asp-for="Id" />
                    <span asp-validation-for="Fullname" class="text-danger"></span>
                </div>
            </div>



        </div>

        <div class="form-group mb-3">
            @* <label asp-for="Picture" class="form-label">Picture</label> *@
            <input asp-for="Picture" value="@Model.Picture" class="form-control" type="hidden" placeholder="@Model.Fullname" />
            @* <span asp-validation-for="Picture" class="text-danger"></span> *@
        </div>

        <div class="form-group mb-3">
            <label asp-for="About" class="form-label">Hakkında</label>
            <textarea asp-for="About" class="form-control"></textarea>
            <span asp-validation-for="About" class="text-danger"></span>
        </div>

        <div class="form-group mb-3">
            <label asp-for="Weight" class="form-label">Ağırlık</label>
            <input asp-for="Weight" class="form-control" type="number" />
            <span asp-validation-for="Weight" class="text-danger"></span>
        </div>

        <div class="form-group mb-3">
            <label asp-for="Height" class="form-label">Boy</label>
            <input asp-for="Height" class="form-control" type="number" />
            <span asp-validation-for="Height" class="text-danger"></span>
        </div>

        <div class="form-group mb-3">
            <label asp-for="DateOfBirth" class="form-label">Doğum Tarihi</label>
            <input asp-for="DateOfBirth" class="form-control" type="date" />
            <span asp-validation-for="DateOfBirth" class="text-danger"></span>
        </div>

        <div>


            @for (int i = 0; i < Model.DietPlans.Count; i++)
            {
                <div class="card mb-3">
                    <div class="card-body">
                        <h1 class="card-title">Danışan Diyet Planı</h1>
                        <div class="form-group mb-3">
                            <input type="hidden" asp-for="@Model.DietPlans[i].Id" />
                            <input type="hidden" asp-for="@Model.DietPlans[i].ClientId" />
                            <label asp-for="DietPlans[i].Title" class="form-label">Başlık</label>
                            <input asp-for="DietPlans[i].Title" class="form-control" />
                            <span asp-validation-for="DietPlans[i].Title" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="DietPlans[i].Description" class="form-label">Açıklama</label>
                            <textarea asp-for="DietPlans[i].Description" class="form-control"></textarea>
                            <span asp-validation-for="DietPlans[i].Description" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="DietPlans[i].StartingWeight" class="form-label">Başlangıç Ağırlığı</label>
                            <textarea asp-for="DietPlans[i].StartingWeight" class="form-control"></textarea>
                            <span asp-validation-for="DietPlans[i].StartingWeight" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="DietPlans[i].StartAt" class="form-label">Başlangıç Tarihi</label>
                            <input asp-for="DietPlans[i].StartAt" class="form-control" type="date" />
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="DietPlans[i].EndAt" class="form-label">Bitiş Tarihi</label>
                            <input asp-for="DietPlans[i].EndAt" class="form-control" type="date" />
                        </div>

                        <div class="row mx-md-n4 important!">
                            <hr class="mt-3 mb-3" />
                            <h4>Diyet Planı Öğünleri</h4>
                            @for (int j = 0; j < Model.DietPlans[i].Meals.Count; j++)
                            {
                                <div class="col px-md-4">
                                    <div class="form-group m-2 p-2">
                                        <input type="hidden" asp-for="@Model.DietPlans[i].Meals[j].Id" />
                                        <input type="hidden" asp-for="@Model.DietPlans[i].Meals[j].DietPlanId" />
                                        <label asp-for="DietPlans[i].Meals[j].Name" class="form-label">Öğün Adı</label>
                                        <input asp-for="DietPlans[i].Meals[j].Name" class="form-control" />
                                        <span asp-validation-for="DietPlans[i].Meals[j].Name" class="text-danger"></span>
                                    </div>
                                    <div class="form-group m-2 p-2">
                                        <label asp-for="DietPlans[i].Meals[j].Content" class="form-label">Öğün İçeriği</label>
                                        <textarea asp-for="DietPlans[i].Meals[j].Content" class="form-control"></textarea>
                                        <span asp-validation-for="DietPlans[i].Meals[j].Content" class="text-danger"></span>
                                    </div>
                                    <div class="form-group m-2 p-2">
                                        <label asp-for="DietPlans[i].Meals[j].MealTime" class="form-label">Öğün Saati</label>
                                        <input asp-for="DietPlans[i].Meals[j].MealTime" class="form-control" type="time" />
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>

        <div class="form-group mt-4">
            <input type="submit" value="Güncelle" class="btn btn-primary" />
            <a asp-action="Index" class="btn btn-secondary">Vazgeç</a>
        </div>
    </form>
</div>